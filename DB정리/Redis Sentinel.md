# 🎫 레디스 센티널 Redis Sentinel

> 운영환경에서 Redis는 일반적으로 마스터와 복제(Slave)로 구성된다.  
> - 운영중 마스터가 다운되었다면, 관리자가 이를 감지해서 복제를 마스터로 올리고 클라이언트들이 새로운 마스터에 접속할 수 있도록 해야 하는데 **센티널**은 마스터와 복제를 감시하고 있다가 마스터가 다운되면 이를 감지해서 관리자의 개입없이 자동으로 복제를 마스터로 올려준다.
  
## 센티널(Sentinel) 주요기능
1. **모니터링** : Sentinel은 Redis 마스터와 복제들이 정상 동작하는지 지속적으로 감시한다.
2. **자동 장애조치(Automatic Failover)** : Sentinel은 레디스 마스터가 예기치 않게 다운될 경우 복제를 새로운 마스터로 승격시킨다.
3. **알림** : 레디스 인스턴스들이 failover되었을 때 Pub/Sub으로 애플레키에션(클라이언트)에게 알리거나 shell script로 관리자에게 이메일이나 SMS로 알릴 수 있다.
  
  
## 센티널 구성 원칙
  

![image](https://user-images.githubusercontent.com/71022555/180647246-309301b8-5472-4fd5-8549-a565846a4f89.png)
  
- 센티널 개수를 3개 이상으로 해야한다.
    - 센티널의 오판으로 복제노드를 마스터로 승격할 수 있기 때문이다.
    - 3개 이상의 홀수 인스턴스를 띄워서 과반수 이상의 센티널이 "OK"해야 비로소 마스터 노드의 장애 판단 및 복제 노드의 마스터 승격이 이루어 질 수 있도록 해야한다.


## 구성 방법

추가 예정  

[링크1](https://crystalcube.co.kr/177)  

[링크2](https://syhwang.tistory.com/47)