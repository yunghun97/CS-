# 🧢 Docker

## 설치 방법
1. 공통 스크립트
```bash
sudo wget -qO- http://get.docker.com/ | sh
# 배포판 종류를 자동으로 인식해서 도커 패지키 설치
```
2. Ubuntu Linux
```bash
sudo apt-get update
sudo apt-get install docker.io
# sudo apt-get install docker.io -y
# docker 서비스 실행
sudo service docker start
# 권한 부여
sudo chmod 666 /var/run/docker.sock
```
3. CentOS
```bash
# install
sudo uym install docker
# run
sudo service docker start
# 부팅시 자동 실행 설정
sudo chkconfig docker on
```
### **데이터 또는 프로그램을 격리시키는 기능**을 제공하는 소프트웨어  
- Docker는 주로 서버에 사용된다. 
  
## 장점
1. 독립된 환경
    - 여러 개의 컨테이너를 띄울 수 있으며 똑같은 애플리케이션도 여러개 띄울 수 있음
2. 이미지를 만들 수 있다.
    - 이미지를 만들 수 있고 이미지를 내려받아 사용할 수 있으므로 개발환경 구축이 쉽다.
3. 컨테이너에 커널을 포함시킬 필요가 없다.
4. 한 대의 물리 서버에 여러 대의 서버를 띄울 수 있다.
    - 일반적인 서버도 가능하지만 도커는 각각 독립된 환경을 제공하므로 보다 안전한 상태에서 실행이 가능하다.
5. 서버 관리가 용이하다.
## 단점
1. 리눅스 운영체제에서만 동작가능하다.
2. 호스트 서버에 문제가 생기면 전체 컨테이너에 문제가 발생한다.
- 
### 제약 사항
1. 리눅스 운영체제가 필요하다. 
    - 윈도우나 macOS에서도 도커를 구동할 수는 있지만 이 경우 **내부적으로 리눅스가 사용된다.**
    - 컨테이너에서 동작시킬 프로그램도 리눅스용 프로그램이다.
### 데이터나 프로그램을 독립된 환경에 격리해야 하는 이유
- 대부분의 프로그램은 단독으로 동작하는 것이 아니라 어떤 실행 환경이나, 라이브러리, 다른 프로그램을 이용해 동작한다.
    - 예를 들어 JAVA 환경에서 실행하거나 Python 환경으로 동작해야 하는 프로그램들이 있다. 
    - 따라서 해당 프로그램에 맞는 실행 환경을 제공하므로써 효율적인 프로그램 동적 가능
    - 독립된 환경이 아니라면 어떠한 시스템이 업데이트 된다면 이와 연결된 프로그램이 시스템이 5.x 버전에서 동작하지만 6.x로 시스템이 업데이트 된다면 이 프로그램을 동작을 하지 않게 된다.
    - 이렇게 프로그램 간 공유를 최대한 줄여 오류를 줄일 수 있다.  
  
## 서버
> 어떤 서비스(Service)를 제공(Serve)하는 것  
  

1. 기능적 의미의 서버
- ex) 웹서버(웹 기능 제공), 메일 서버(메일 기능을 제공)
2. 물리적 컴퓨터로서의 서버
- ex) 데스크톱 컴퓨터와 마찬가지로 어딘가에 물리적으로 존재하는 컴퓨터
### 일반적인 컴퓨터와의 차이
- 일반 컴퓨터
    - 개인이 사용하는 컴퓨터
- 서버
    - 여러 사람이 원격으로 접근해 사용
> 따라서 **서버의 기능은 소프트웨어가 제공**하는 것으로 소프트웨어를 설치하면 '서버'의 기능을 갖게 된다.  
  
## Docker 장점
1. **물리적 환경의 차이, 서버 구성의 차이를 무시**할 수 있으므로 운영 서버와 개발 서버의 환경 차이로 인한 문제를 원천적으로 방지할 수 있다.
  
## ❗ 도커와 가상화 기술의 차이 
### 가상화 기술(VirtualBox, VMware)
- 가상화 기술은 물리 서버를 만드는 것과 같다. 여기서 '가상'이라는 말은 물리적인 대상을 소프트웨어로 대체
- 즉 메인보드와 CPU, 메모리 등의 물리적인 부품을 소프트웨어로 구현
- 실질적으로 물리 서버와 동등한 것으로 당연히 운영체제도 아무 것이나 설치할 수 있고, 그 위에서 어떤 소프트웨어를 구동해도 무방
### 도커
- 리눅스가 동작하는 것처럼 보이지만 실제 리눅스가 동작하는 것은 아니다.
- 운영체제의 기능 중 일부를 호스트 역할을 하는 물리 서버에 맡겨 부담을 덜어 둔 형태다.
- 다시 말해 컨테이너는 운영체제 일부 기능을 호스트 컴퓨터에 의존하기 때문에 물리 서버에도 리눅스 기능이 필요하며, 컨테이너의 내용도 리눅스 운영체제가 될 수 밖에 없다.
## ❗ 도커와 AWS EC2의 차이 
### AWS EC2
- 가상화 기술이다. 다시 말해 각각의 인스턴스가 완전히 독립된 컴퓨터처럼 동작한다. 따라서 EC2와 도커의 관계는 VirtualBox나 VMware와 도커의 관계와 같다.
- 다만 인스턴스틑 컨테이너와 마찬가지로 AMI라는 이미지로 부터 생성하므로 인스턴스를 배포하는 방법은 도커와 비슷하다.
## 😀 도커와 AWS EC2의 차이 
AWS ECS가 이에 해당한다. 이들 서비스를 사용하면 별도로 가상 서버를 만들지 않아도 컨테이너 이미지를 그대로 실행할 수 있다.

## 😗 도커 작동 원리
> 운영체제 위에 도커 엔진이 작동하고 그 위에서 컨테이너가 동작한다.
  
- 모든 컨테이너에는 '리눅스 운영체제 비슷한 무언가'가 들어 있다.

참고 도서
---
##### 그림과 실습으로 배우는 도커 & 쿠버네티스(위키북스)